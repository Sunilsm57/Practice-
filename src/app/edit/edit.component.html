<div class="content">
    <div class="row">
        <div class="col-md-6 m-5 mt-0">
            <mat-card>
                <mat-card-header>
                    <mat-card-title>Edit Product</mat-card-title>
                </mat-card-header>

                <mat-card-content>
                    <div *ngIf="isLoading" class="loading-spinner">
                        <p>Loading product...</p>
                    </div>

                    <form [formGroup]="editForm" (ngSubmit)="onSubmit()" *ngIf="!isLoading && product">
                        <!-- Title Field -->
                        <mat-form-field appearance="fill" class="full-width">
                            <mat-label>Title</mat-label>
                            <input matInput formControlName="title" placeholder="Enter product title">
                            <mat-error *ngIf="editForm.get('title')?.hasError('required')">
                                Title is required
                            </mat-error>
                            <mat-error *ngIf="editForm.get('title')?.hasError('minlength')">
                                Title must be at least 3 characters
                            </mat-error>
                        </mat-form-field>

                        <!-- Price Field -->
                        <mat-form-field appearance="fill" class="full-width">
                            <mat-label>Price</mat-label>
                            <input matInput formControlName="price" type="number" placeholder="Enter product price"
                                step="0.01">
                            <mat-error *ngIf="editForm.get('price')?.hasError('required')">
                                Price is required
                            </mat-error>
                            <mat-error *ngIf="editForm.get('price')?.hasError('min')">
                                Price must be greater than 0
                            </mat-error>
                        </mat-form-field>

                        <!-- Category Field -->
                        <mat-form-field appearance="fill" class="full-width">
                            <mat-label>Category</mat-label>
                            <input matInput formControlName="category" placeholder="Enter product category">
                            <mat-error *ngIf="editForm.get('category')?.hasError('required')">
                                Category is required
                            </mat-error>
                        </mat-form-field>

                        <!-- Description Field -->
                        <mat-form-field appearance="fill" class="full-width">
                            <mat-label>Description</mat-label>
                            <textarea matInput formControlName="description" placeholder="Enter product description"
                                rows="4"></textarea>
                            <mat-error *ngIf="editForm.get('description')?.hasError('required')">
                                Description is required
                            </mat-error>
                        </mat-form-field>

                        <!-- Image URL Field -->
                        <mat-form-field appearance="fill" class="full-width">
                            <mat-label>Image URL</mat-label>
                            <input matInput formControlName="image" placeholder="Enter image URL">
                            <mat-error *ngIf="editForm.get('image')?.hasError('required')">
                                Image URL is required
                            </mat-error>
                        </mat-form-field>

                        <!-- Image Preview -->
                        <div class="image-preview mt-3" *ngIf="editForm.get('image')?.value">
                            <img [src]="editForm.get('image')?.value" [alt]="editForm.get('title')?.value"
                                class="preview-image">
                        </div>
                    </form>
                </mat-card-content>

                <mat-card-actions>
                    <button mat-raised-button color="primary" (click)="onSubmit()"
                        [disabled]="editForm.invalid || isSubmitting">
                        {{ isSubmitting ? 'Saving...' : 'Save Changes' }}
                    </button>
                    <button mat-raised-button color="warn" (click)="onCancel()" [disabled]="isSubmitting">
                        Cancel
                    </button>
                </mat-card-actions>
            </mat-card>
        </div>
    </div>
</div>